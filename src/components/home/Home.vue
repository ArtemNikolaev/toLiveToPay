<template>
  <section id="home-section" class="col col-all">
    <article id="home-current" class="widget">
      <section class="content">
        <p></p>
        <p>–ë—é–¥–∂–µ—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</p>
        <p>{{moneyForToday}}üí∞</p>
        <button v-on:click='add'>–ü–æ—Ç—Ä–∞—Ç–∏—Ç—å!</button>
        <p></p>
      </section>
    </article>

    <article id="home-expenditures" class="widget">
      <section class="content">
        <p>
          <span>üí∞</span>
          <span>–û–ø–∏—Å–∞–Ω–∏–µ</span>
        </p>

        <p v-for="expenditure in expenses" :key="expenditure.datetime">
          <span>{{expenditure.summ}}üí∞</span>
          <span>{{expenditure.description}}</span>
        </p>
      </section>
    </article>

    <article id="home-other" class="widget">
      <section class="content">
        <span v-on:click='editBudget' class="edit">‚öô</span>
        <article class="left">
          <p></p>
          <p>–î–Ω–µ–≤–Ω–æ–π –ë—é–¥–∂–µ—Ç:</p>
          <p>–û—Å—Ç–∞–ª–æ—Å—å –î–Ω–µ–π:</p>
          <p>–û—Å—Ç–∞–ª–æ—Å—å –î–µ–Ω–µ–≥:</p>
          <p></p>
        </article>
        <article class="right">
          <p></p>
          <p>{{moneyPerDay}}üí∞</p>
          <p>{{daysToSalary}}</p>
          <p>{{availableSumm}}üí∞</p>
          <p></p>
        </article>
      </section>
    </article>
  </section>
</template>

<script>
import storage from '../../services/localstorageService'

export default {
  name: 'Home',
  data () {
    const [err, data] = storage.homeCalculation()

    if (err || data.daysToSalary < 1) this.$router.push('/new')

    return data
  },
  methods: {
    add: function () {
      this.$router.push('/add')
    },
    editBudget: function () {
      this.$router.push('/new')
    }
  }
}
</script>

<style lang='scss' src='./home.component.scss'>
</style>
